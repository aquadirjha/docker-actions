name: Shell commands
on: [push]

jobs:
  run-shell-command:
    runs-on: ubuntu-latest
    steps:
      - name: echo string
        run : echo "Hello-Github"
      - name: Run multiple line script
        run: |
          env
          node -v
          npm -v

#   zap_scan:
#     runs-on: ubuntu-latest
#     name: Scan the webapplication
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v2
#         with:
#           ref: master
#       - name: ZAP Scan
#         uses: zaproxy/action-full-scan@v0.4.0
#         with:
#           docker_name: 'owasp/zap2docker-stable'
#           target: 'http://testphp.vulnweb.com/'
#           rules_file_name: '.zap/rules.tsv'
#           cmd_options: '-a'
          


  DockerImageBuildAndPush:
    name: Docker Task
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1.2.0

    - name: Build Docker Image
      run: docker build . -t "TestDockerImage" 

    - name: Login to JFrog
      uses: docker login sample113355.jfrog.io
      with:
        apikey: ${{ secrets.DOCKER_REGISTRY }}

    - name: Build and push
      id: docker_build
    - uses: docker/build-push-action@v2
      with:
        push: true
        tags: sample113355.jfrog.io/TestDockerImage:latest
